import{_ as s,k as a,n as t,o as n}from"./app-8vJtKbrT.js";const e={};function l(h,i){return n(),a("div",null,i[0]||(i[0]=[t(`<h1 id="run-from-source" tabindex="-1"><a class="header-anchor" href="#run-from-source"><span>Run from source</span></a></h1><div class="hint-container caution"><p class="hint-container-title">Caution</p><p>This step is only for users who need to modify the source code by themselves. If you don&#39;t understand, please skip it.</p></div><h3 id="environmental-preparation" tabindex="-1"><a class="header-anchor" href="#environmental-preparation"><span><strong>Environmental preparation</strong></span></a></h3><p>First, you need to have an environment of <code>git</code>, <code>nodejs</code>, <code>pnpm</code>, <code>golang&gt;=1.20</code>, <code>gcc</code></p><h3 id="building-the-front-end" tabindex="-1"><a class="header-anchor" href="#building-the-front-end"><span><strong>Building the front end</strong></span></a></h3><p>Use <code>git clone --recurse-submodules https://github.com/alist-org/alist-web.git</code> command to clone this project, execute <code>pnpm install &amp;&amp; pnpm build</code> to get the target file in the dist directory</p><h3 id="build-the-backend" tabindex="-1"><a class="header-anchor" href="#build-the-backend"><span><strong>Build the backend</strong></span></a></h3><p>Clone <a href="https://github.com/alist-org/alist" target="_blank" rel="noopener noreferrer">https://github.com/alist-org/alist</a> for this project, copy the <code>dist</code> directory of the previous step to the <code>public</code> directory under the project, and then:</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">appName</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;alist&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">builtAt</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> +&#39;%F %T %z&#39;)&quot;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">goVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">go</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/go version //&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gitAuthor</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> show</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -s</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --format=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39;format:%aN &lt;%ae&gt;&#39;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> HEAD</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">gitCommit</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> log</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --pretty=format:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;%h&quot;</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">version</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">git</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> describe</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --long</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --tags</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --dirty</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --always</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">webVersion</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">wget</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -qO-</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -t1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -T2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;https://api.github.com/repos/alist-org/alist-web/releases/latest&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">grep</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;tag_name&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">head</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -n</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 1</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">awk</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -F</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;:&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;{print $2}&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sed</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &#39;s/\\&quot;//g;s/,//g;s/ //g&#39;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">ldflags</span><span style="--shiki-light:#383A42;--shiki-dark:#56B6C2;">=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-w -s </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-X &#39;github.com/alist-org/alist/v3/internal/conf.BuiltAt=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$builtAt</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-X &#39;github.com/alist-org/alist/v3/internal/conf.GoVersion=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$goVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-X &#39;github.com/alist-org/alist/v3/internal/conf.GitAuthor=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$gitAuthor</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-X &#39;github.com/alist-org/alist/v3/internal/conf.GitCommit=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$gitCommit</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-X &#39;github.com/alist-org/alist/v3/internal/conf.Version=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$version</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">-X &#39;github.com/alist-org/alist/v3/internal/conf.WebVersion=</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$webVersion</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&#39; </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">go</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> build</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -ldflags=</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">$ldflags</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">&quot;</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> .</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><details class="hint-container details"><summary>compilation tutorial videos you may need</summary><p>Windows version: <strong><a href="https://www.bilibili.com/video/BV1Xr4y1z723" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1Xr4y1z723</a></strong> (Although it is V2 version, it is the same as V3 version..)</p><p>Linux version: <strong><a href="https://www.bilibili.com/video/BV1GW4y1s742" target="_blank" rel="noopener noreferrer">https://www.bilibili.com/video/BV1GW4y1s742</a></strong></p><p>Fanwai compiled documents: <strong><a href="https://www.yuque.com/anwenya/alist/glqlhu" target="_blank" rel="noopener noreferrer">https://www.yuque.com/anwenya/alist/glqlhu</a></strong></p></details>`,10)]))}const p=s(e,[["render",l]]),k=JSON.parse(`{"path":"/guide/install/source.html","title":"Run from source","lang":"en-US","frontmatter":{"icon":"iconfont icon-code","order":9,"category":["Guide"],"tag":["Install","Guide"],"sticky":true,"star":true,"description":"Run from source Caution This step is only for users who need to modify the source code by themselves. If you don't understand, please skip it. Environmental preparation First, y...","head":[["link",{"rel":"alternate","hreflang":"zh-cn","href":"https://alist.nn.ci/zh/guide/install/source.html"}],["meta",{"property":"og:url","content":"https://alist.nn.ci/guide/install/source.html"}],["meta",{"property":"og:site_name","content":"AList Docs"}],["meta",{"property":"og:title","content":"Run from source"}],["meta",{"property":"og:description","content":"Run from source Caution This step is only for users who need to modify the source code by themselves. If you don't understand, please skip it. Environmental preparation First, y..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"en-US"}],["meta",{"property":"og:locale:alternate","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2023-08-07T08:33:37.000Z"}],["meta",{"property":"article:tag","content":"Install"}],["meta",{"property":"article:tag","content":"Guide"}],["meta",{"property":"article:modified_time","content":"2023-08-07T08:33:37.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Run from source\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2023-08-07T08:33:37.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"]]},"headers":[{"level":3,"title":"Environmental preparation","slug":"environmental-preparation","link":"#environmental-preparation","children":[]},{"level":3,"title":"Building the front end","slug":"building-the-front-end","link":"#building-the-front-end","children":[]},{"level":3,"title":"Build the backend","slug":"build-the-backend","link":"#build-the-backend","children":[]}],"git":{"createdTime":1662556125000,"updatedTime":1691397217000,"contributors":[{"name":"Noah Hsu","username":"Noah Hsu","email":"i@nn.ci","commits":2,"url":"https://github.com/Noah Hsu"},{"name":"孟古一","username":"孟古一","email":"73788063+mengguyi@users.noreply.github.com","commits":1,"url":"https://github.com/孟古一"},{"name":"安稳","username":"安稳","email":"56105412+anwen-anyi@users.noreply.github.com","commits":6,"url":"https://github.com/安稳"},{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":3,"url":"https://github.com/Andy Hsu"},{"name":"Andy Hsu","username":"Andy Hsu","email":"xhofe@qq.com","commits":1,"url":"https://github.com/Andy Hsu"}]},"readingTime":{"minutes":0.97,"words":292},"filePathRelative":"guide/install/source.md","localizedDate":"September 7, 2022","autoDesc":true}`);export{p as comp,k as data};
