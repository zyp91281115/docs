import{d as x,O as o,X as F,_,c as z,e,b as E,a3 as h,a as p,f as i,g as C,a1 as g,a4 as f,r as A,o as T}from"./app-BYVCkMFV.js";import{_ as w}from"./aliyundrive-CF7jp5n4.js";const S=x({__name:"aliyundrive.html",setup(b,{expose:u}){u();const n=o("获取 Token"),t=o(0),l=o(""),d=o(""),r=o(""),s=async()=>{n.value="等待...",t.value=1;const a=await(await fetch(`${F()}/alist/ali/qr`)).json();console.log(a),n.value="使用阿里云盘 APP 扫描然后点击",t.value=2,r.value=JSON.stringify({ck:a.content.data.ck,t:a.content.data.t.toString()}),l.value=`${F()}/qr/?size=400&text=${encodeURIComponent(a.content.data.codeContent)}`},c=async()=>{t.value=3,n.value="等待...";const a=await(await fetch(`${F()}/alist/ali/ck`,{method:"POST",headers:{"Content-Type":"application/json"},body:r.value})).json(),{content:{data:{qrCodeStatus:D,loginResult:v,bizExt:y}}}=a;if(v!=="success"){t.value=2,n.value="使用阿里云盘 App 扫描然后点击",alert("Status:"+D);return}const k=JSON.parse(atob(y));d.value=k.pds_login_result.refreshToken,n.value="获取 Token 成功",t.value=4,console.log(a)},m={btnText:n,state:t,src:l,token:d,ckData:r,getQr:s,getToken:c,onClick:async()=>{t.value===0&&s(),t.value===2&&c()}};return Object.defineProperty(m,"__isScriptSetup",{enumerable:!1,value:!0}),m}}),P={class:"hint-container warning"},W=["disabled"],N={style:{margin:"4px"}},K=["src"],R={class:"hint-container info"},q={class:"hint-container-title"};function Z(b,u,n,t,l,d){const r=A("RouteLink"),s=A("Mermaid");return T(),z("div",null,[u[9]||(u[9]=e("h1",{id:"阿里云盘-分享",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#阿里云盘-分享"},[e("span",null,"阿里云盘 / 分享")])],-1)),e("div",P,[u[3]||(u[3]=e("p",{class:"hint-container-title"},"注意",-1)),e("p",null,[u[1]||(u[1]=i("不推荐使用该驱动，因为它不稳定，随时可能被屏蔽，我们会在以后的版本中移除。推荐使用官方 API 的驱动 ")),p(r,{to:"/zh/guide/drivers/aliyundrive_open.html"},{default:C(()=>u[0]||(u[0]=[i("Aliyundrive Open")])),_:1}),u[2]||(u[2]=i("。"))])]),u[10]||(u[10]=E('<div class="hint-container tip"><p class="hint-container-title">提示</p><p>由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。<br> 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 <code>refresh token</code> 正常工作。</p></div><h3 id="刷新令牌" tabindex="-1"><a class="header-anchor" href="#刷新令牌"><span><strong>刷新令牌</strong></span></a></h3><p>按照这个 <a href="https://github.com/Xhofe/alist/issues/88" target="_blank" rel="noopener noreferrer">issue</a> 在手机上捕获/查找日志（<code>/data/media/0/Android/data/com.alicloud.databox/files/logs/trace/</code>）。 或者您可以点击：</p>',3)),e("p",null,[e("button",{disabled:t.state===3||t.state===1,style:{outline:"none",padding:"12px",background:"#70c6be",border:"none","border-radius":"8px",cursor:"pointer","font-size":"20px"},onClick:t.onClick},[u[4]||(u[4]=e("br",null,null,-1)),i(" "+g(t.btnText),1),u[5]||(u[5]=e("br",null,null,-1))],8,W)]),h(e("div",N,[e("img",{src:t.src},null,8,K)],512),[[f,t.src]]),h(e("div",null,[e("div",R,[e("p",q,"Token: "+g(t.token),1)])],512),[[f,t.token]]),u[11]||(u[11]=E('<p><em>API is hosted on <a href="http://replit.com" target="_blank" rel="noopener noreferrer">replit.com</a></em></p><h3 id="根文件夹id" tabindex="-1"><a class="header-anchor" href="#根文件夹id"><span><strong>根文件夹ID</strong></span></a></h3><p>打开阿里云盘官网，点击进入要设置的文件夹时点击 URL 后面的字符串</p><p>如 <a href="https://www.alipan.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940" target="_blank" rel="noopener noreferrer">https://www.alipan.com/drive/folder/5fe01e1830601baf774e4827a9fb8fb2b5bf7940</a></p><p>这个文件夹的 file_id 即为 <code>5fe01e1830601baf774e4827a9fb8fb2b5bf7940</code>：</p><p><img src="'+w+'" alt="file_id" loading="lazy"></p><h3 id="秒传" tabindex="-1"><a class="header-anchor" href="#秒传"><span><strong>秒传</strong></span></a></h3><p>上传的时候校验 hash，如果云端有，直接生成文件，不消耗流量</p><h3 id="内部上传" tabindex="-1"><a class="header-anchor" href="#内部上传"><span><strong>内部上传</strong></span></a></h3><p>如果你部署 Alist 的服务器是阿里云北京地区 ECS，打开此开关可以提升文件上传速度。不符合要求的服务器请不要打开此开关，否则会出现无法上传的问题。</p><br><h2 id="阿里云盘分享" tabindex="-1"><a class="header-anchor" href="#阿里云盘分享"><span><strong>阿里云盘分享</strong></span></a></h2>',12)),e("p",null,[u[7]||(u[7]=i("已经无法使用，并且后续不再开发和维护分享存储方式，同时")),p(r,{to:"/zh/guide/drivers/aliyundrive_open.html"},{default:C(()=>u[6]||(u[6]=[e("strong",null,"阿里云盘Open",-1)])),_:1}),u[8]||(u[8]=i("获取的Token也不可以在阿里云盘分享挂载存储使用。"))]),u[12]||(u[12]=e("br",null,null,-1)),u[13]||(u[13]=e("h3",{id:"默认使用的下载方式",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#默认使用的下载方式"},[e("span",null,[e("strong",null,"默认使用的下载方式")])])],-1)),p(s,{id:"mermaid-69",code:"eJzT1dXlKsksyUm1Uni5e8aLdUue7N3/fMqK57Nank5e9Xx575Md3S/27n02befTPf3v98znAqlPy8kvT85ILCpRCHHiUgCC4pLKnFSFREOFtMycHCvlpKQ0neKSovzsVCvlNDMzKFu3PDOlJMPKqKBCJzk/J78IKJeWhqzdCKo9Lc3c1NwUboKxsTGqCSYFFRBtpUnpRYkFGQqZKamGCtEKsWDRREMwlZqXAuVGGxsYxVpZWRXn56Ym5yQWF9sCQQ3EszWJRtFA3z7r2P5i3b6nS9ohRoBVuaSmKcC1wFxmaQZRYBj9bM6aZ3N2Pdm9+PmEtlhdPaDelw2derp2WA1MMoyGqAwN8iGoODknMzkbFJhKenr6KUWZZalFxfrJ+bm5+Xl6GSW5OcrlqUkpiWW6z9dOez51qRKSniQy9CQTrQcAkHnb9A=="})])}const H=_(S,[["render",Z],["__file","aliyundrive.html.vue"]]),J=JSON.parse('{"path":"/zh/guide/drivers/aliyundrive.html","title":"阿里云盘 / 分享","lang":"zh-CN","frontmatter":{"icon":"iconfont icon-state","order":4,"category":["Guide"],"tag":["Storage","Guide","302"],"sticky":true,"star":true,"description":"阿里云盘 / 分享 注意 不推荐使用该驱动，因为它不稳定，随时可能被屏蔽，我们会在以后的版本中移除。推荐使用官方 API 的驱动 。 提示 由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 refresh toke...","head":[["link",{"rel":"alternate","hreflang":"en-us","href":"https://alist.nn.ci/guide/drivers/aliyundrive.html"}],["meta",{"property":"og:url","content":"https://alist.nn.ci/zh/guide/drivers/aliyundrive.html"}],["meta",{"property":"og:site_name","content":"AList文档"}],["meta",{"property":"og:title","content":"阿里云盘 / 分享"}],["meta",{"property":"og:description","content":"阿里云盘 / 分享 注意 不推荐使用该驱动，因为它不稳定，随时可能被屏蔽，我们会在以后的版本中移除。推荐使用官方 API 的驱动 。 提示 由于阿里云盘 referer 的限制，必须使用移动端 token。 使用桌面 Web 令牌将导致无法下载和预览。 当然，如果你在本地使用或者带宽足够大，你也可以开启代理，让桌面 Web 的 refresh toke..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://alist.nn.ci/img/drivers/aliyundrive.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:locale:alternate","content":"en-US"}],["meta",{"property":"og:updated_time","content":"2024-11-02T14:09:15.000Z"}],["meta",{"property":"article:tag","content":"Storage"}],["meta",{"property":"article:tag","content":"Guide"}],["meta",{"property":"article:tag","content":"302"}],["meta",{"property":"article:modified_time","content":"2024-11-02T14:09:15.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"阿里云盘 / 分享\\",\\"image\\":[\\"https://alist.nn.ci/img/drivers/aliyundrive.png\\"],\\"dateModified\\":\\"2024-11-02T14:09:15.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Andy Hsu\\",\\"url\\":\\"https://i.nn.ci\\"}]}"]]},"headers":[{"level":3,"title":"刷新令牌","slug":"刷新令牌","link":"#刷新令牌","children":[]},{"level":3,"title":"根文件夹ID","slug":"根文件夹id","link":"#根文件夹id","children":[]},{"level":3,"title":"秒传","slug":"秒传","link":"#秒传","children":[]},{"level":3,"title":"内部上传","slug":"内部上传","link":"#内部上传","children":[]},{"level":2,"title":"阿里云盘分享","slug":"阿里云盘分享","link":"#阿里云盘分享","children":[{"level":3,"title":"默认使用的下载方式","slug":"默认使用的下载方式","link":"#默认使用的下载方式","children":[]}]}],"git":{"createdTime":1662556125000,"updatedTime":1730556555000,"contributors":[{"name":"Noah Hsu","username":"Noah Hsu","email":"i@nn.ci","commits":8,"url":"https://github.com/Noah Hsu"},{"name":"Chi_Tang","username":"Chi_Tang","email":"chitang@duck.com","commits":1,"url":"https://github.com/Chi_Tang"},{"name":"sheltonzhu","username":"sheltonzhu","email":"498220739@qq.com","commits":1,"url":"https://github.com/sheltonzhu"},{"name":"孟古一","username":"孟古一","email":"73788063+mengguyi@users.noreply.github.com","commits":1,"url":"https://github.com/孟古一"},{"name":"安稳","username":"安稳","email":"56105412+anwen-anyi@users.noreply.github.com","commits":7,"url":"https://github.com/安稳"},{"name":"Wuxuan","username":"Wuxuan","email":"git@wangwuxuan.cn","commits":1,"url":"https://github.com/Wuxuan"},{"name":"Andy Hsu","username":"Andy Hsu","email":"i@nn.ci","commits":4,"url":"https://github.com/Andy Hsu"},{"name":"Patrick-Ze","username":"Patrick-Ze","email":"19711799+Patrick-Ze@users.noreply.github.com","commits":1,"url":"https://github.com/Patrick-Ze"},{"name":"安稳","username":"安稳","email":"anwen_anyi@foxmail.com","commits":5,"url":"https://github.com/安稳"}]},"readingTime":{"minutes":2.52,"words":756},"filePathRelative":"zh/guide/drivers/aliyundrive.md","localizedDate":"2022年9月7日","autoDesc":true}');export{H as comp,J as data};
