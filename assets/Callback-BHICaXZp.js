import{d as h,r as w,c as a,u as e,o as r,w as n,e as d,t as u,b as C,a as b,N as f,f as x,a4 as P,g as S,_ as T}from"./app-C1C6PXAB.js";import{N as m}from"./Alert-T22G3254.js";import{N as V}from"./Input-DUk6n72I.js";const j=h({__name:"Callback",setup(z){const o=new URL(window.location.href),c=o.searchParams.get("code"),l=o.searchParams.get("error"),y=o.searchParams.get("error_description"),k=o.searchParams.get("state")||"Ojo=",[v,N]=window.atob(k).split("::"),t=w();return c&&!l&&(async()=>{const s=await(await fetch(S()+"/alist/ali_open/code",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:c,grant_type:"authorization_code",client_id:v,client_secret:N})})).json();t.value=s})(),(g,s)=>!e(c)||e(l)?(r(),a(e(m),{key:0,title:e(l)||"Error",type:"error"},{default:n(()=>[d(u(e(y)),1)]),_:1},8,["title"])):(r(),a(e(f),{key:1,vertical:"",size:"large"},{default:n(()=>{var i,p,_;return[(i=t.value)!=null&&i.error||(p=t.value)!=null&&p.error?(r(),a(e(m),{key:0,title:(_=t.value)==null?void 0:_.error,type:"error"},{default:n(()=>[d(u(t.value.error),1)]),_:1},8,["title"])):C("",!0),b(e(f),{vertical:""},{default:n(()=>[s[0]||(s[0]=x("b",null,"refresh_token:",-1)),t.value?(r(),a(e(V),{key:1,type:"textarea",autosize:"",readonly:"",value:t.value.refresh_token},null,8,["value"])):(r(),a(e(P),{key:0}))]),_:1,__:[0]})]}),_:1}))}}),D=T(j,[["__scopeId","data-v-5c4a4ac9"]]);export{D as C};
