import{d as y,L as g,a5 as S,O as x,_ as v,P as i,o as s,g as p,f as d,R as _,e as t,Q as h,a as w}from"./app-3Qodj0KA.js";import{N as C}from"./Input-m7prhmiJ.js";import{N as P}from"./Alert-Cgbv7d6K.js";const u="a78d5a69054042fa936f6c77f9a0ae8b",b="9c119bbb04b346d2a52aa64401936b2b",A="https://alist.nn.ci/tool/yandex/callback",I=y({__name:"Callback",setup(N,{expose:r}){r();const a=new URL(window.location.href),e=a.searchParams.get("code"),f=a.searchParams.get("error"),k=a.searchParams.get("error_description"),o=g(),n=async()=>{const l=new URLSearchParams;l.append("grant_type","authorization_code"),l.append("client_id",u),l.append("client_secret",b),l.append("code",e||"");const m=await(await fetch("https://oauth.yandex.com/token",{method:"POST",body:l})).json();o.value=m};e&&!f&&n();const c={client_id:u,client_secret:b,callback_uri:A,url:a,code:e,error:f,error_description:k,token:o,getToken:n,get NAlert(){return P},get NSpace(){return x},get NSpin(){return S},get NInput(){return C}};return Object.defineProperty(c,"__isScriptSetup",{enumerable:!1,value:!0}),c}});function V(N,r,a,e,f,k){return!e.code||e.error?(s(),i(e.NAlert,{key:0,title:e.error||"Error",type:"error"},{default:p(()=>[d(_(e.error_description),1)]),_:1},8,["title"])):(s(),i(e.NSpace,{key:1,vertical:"",size:"large"},{default:p(()=>{var o,n,c;return[t("p",null,[r[0]||(r[0]=t("b",null,"client_id: ",-1)),d(_(e.client_id))]),t("p",null,[r[1]||(r[1]=t("b",null,"client_secret: ",-1)),d(_(e.client_secret))]),t("p",null,[r[2]||(r[2]=t("b",null,"redirect_uri: ",-1)),d(_(e.callback_uri))]),(o=e.token)!=null&&o.error||(n=e.token)!=null&&n.error_description?(s(),i(e.NAlert,{key:0,title:(c=e.token)==null?void 0:c.error,type:"error"},{default:p(()=>[d(_(e.token.error_description),1)]),_:1},8,["title"])):h("",!0),w(e.NSpace,{vertical:""},{default:p(()=>[r[3]||(r[3]=t("b",null,"refresh_token:",-1)),e.token?(s(),i(e.NInput,{key:1,type:"textarea",autosize:"",readonly:"",value:e.token.refresh_token},null,8,["value"])):(s(),i(e.NSpin,{key:0}))]),_:1})]}),_:1}))}const R=v(I,[["render",V],["__scopeId","data-v-ceb76725"],["__file","Callback.vue"]]);export{R as C};
